# User Interface


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Create the class for the User interface

A class that creates and manages a Gradio-based chat interface.

This class provides a web-based user interface for interacting with chat
models. It handles the display of messages, streaming of responses, and
various UI elements like buttons for sending messages, clearing chat
history, and exporting conversations.

Attributes:

- app (BaseChatApp): The underlying chat application that handles
  message processing. It accepts an instance of the class `BaseChatApp`
  which is defined in the module `app.py`.
- interface (gr.Blocks, optional): The Gradio interface object once
  built.

The interface is built within this class with the `build_interface`
method.

#### Import statement

``` python
from gradiochat.ui import *
```

------------------------------------------------------------------------

### GradioChat

>  GradioChat (app:gradiochat.app.BaseChatApp)

*Gradio interface for the chat application*

#### Build the interface for the GradioChat class

Build and return the Gradio interface.

This method constructs the complete Gradio UI with all components
including: - App title and logo - Chat display area - Message input
field - Control buttons (Send, Clear) - Export functionality - System
information display

The interface is configured according to the settings in the appâ€™s
config.

Returns: gr.Blocks: The constructed Gradio interface object.

> **Learned: `@patch`**
>
> This is a decorator used in `nbdev` to make it possible to spread the
> methods and properties of a class over multiple notebook cells. By
> using `@patch` and setting `self:<classname>` the `nbdev` style
> written code â€˜knowsâ€™ to which class the method or property belongs.

------------------------------------------------------------------------

### GradioChat.build_interface

>  GradioChat.build_interface ()

*Build and return the Gradio interface*

#### Method to launch the app that is instantiated from the class `GradioChat`

------------------------------------------------------------------------

### GradioChat.launch

>  GradioChat.launch (**kwargs)

*Launch the Gradio interface*

## Create chat app from the class `GradioChat`

Launch the Gradio interface.

This method builds the interface if it hasnâ€™t been built yet and then
launches the Gradio web server to make the interface accessible.

------------------------------------------------------------------------

### create_chat_app

>  create_chat_app (config:gradiochat.config.ChatAppConfig)

*Create a complete chat application from a configuration*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td>ChatAppConfig</td>
<td>Instance from the config.ChatAppConfig module</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>GradioChat</strong></td>
<td></td>
</tr>
</tbody>
</table>

## Example

Below is an example to create a simple chat UI wich follows more or less
the styling confentions from Waterschap Drents Overijsselse Delta.

``` python
# Eval is false to prevent testing when nbdev_test or nbdev_prepare is run. The api_key is stored in a .env file and that is not accessible at test time.
themeWDODelta = gr.themes.Base(
    primary_hue=gr.themes.Color(c100="#ffedd5", c200="#ffddb3", c300="#fdba74", c400="#f29100", c50="#fff7ed", c500="#f97316", c600="#ea580c", c700="#c2410c", c800="#9a3412", c900="#7c2d12", c950="#6c2e12"),
    neutral_hue="slate",
    radius_size="sm",
    font=['VivalaSansRound', 'ui-sans-serif', 'system-ui', 'sans-serif'],
).set(
    embed_radius='*radius_xs',
    border_color_accent='*primary_400',
    border_color_accent_dark='*secondary_700',
    border_color_primary='*secondary_700',
    border_color_primary_dark='*secondary_700',
    color_accent='*primary_400',
    shadow_drop='*shadow_drop_lg',
    button_primary_background_fill='*primary_400',
    button_primary_background_fill_dark='*primary_400',
    button_primary_background_fill_hover='*secondary_700',
    button_primary_background_fill_hover_dark='*secondary_700',
    button_primary_border_color='*secondary_700',
    button_primary_border_color_dark='*secondary_700'
)

# Create a test configuration
test_config = ChatAppConfig(
    app_name="Job Description Assistant",
    description="Chat with an AI to create better job descriptions",
    system_prompt="You are an assistant that helps users create professional job descriptions. Ask questions to gather information about the position and responsibilities.",
    starter_prompt="Hello! I'm your job description assistant. Tell me about the position you'd like to create a description for.",
    model=ModelConfig(
        provider="togetherai",
        model_name="mistralai/Mistral-7B-Instruct-v0.3",
        api_key_env_var="TG_API_KEY"
    ),
    theme=themeWDODelta,
    logo_path=Path("../data/wdod_logo.svg")
)

# Create and launch the app
app = create_chat_app(test_config)
app.launch(share=False, # Set share=False if you don't want a public URL
        pwa=True # Set pwa=False if you don't want a progressive web app.
        )
```

    NameError: name 'secondary' is not defined
    [0;31m---------------------------------------------------------------------------[0m
    [0;31mNameError[0m                                 Traceback (most recent call last)
    Cell [0;32mIn[8], line 41[0m
    [1;32m     39[0m [38;5;66;03m# Create and launch the app[39;00m
    [1;32m     40[0m app [38;5;241m=[39m create_chat_app(test_config)
    [0;32m---> 41[0m [43mapp[49m[38;5;241;43m.[39;49m[43mlaunch[49m[43m([49m[43mshare[49m[38;5;241;43m=[39;49m[38;5;28;43;01mFalse[39;49;00m[43m,[49m[43m [49m[38;5;66;43;03m# Set share=False if you don't want a public URL[39;49;00m
    [1;32m     42[0m [43m        [49m[43mpwa[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m [49m[38;5;66;43;03m# Set pwa=False if you don't want a progressive web app.[39;49;00m
    [1;32m     43[0m [43m        [49m[43m)[49m

    Cell [0;32mIn[6], line 6[0m, in [0;36mlaunch[0;34m(self, **kwargs)[0m
    [1;32m      4[0m [38;5;250m[39m[38;5;124;03m"""Launch the Gradio interface"""[39;00m
    [1;32m      5[0m [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39minterface [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
    [0;32m----> 6[0m     [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mbuild_interface[49m[43m([49m[43m)[49m
    [1;32m      8[0m [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39minterface[38;5;241m.[39mlaunch([38;5;241m*[39m[38;5;241m*[39mkwargs)

    Cell [0;32mIn[5], line 67[0m, in [0;36mbuild_interface[0;34m(self)[0m
    [1;32m     62[0m     [38;5;28;01mwith[39;00m gr[38;5;241m.[39mRow():
    [1;32m     63[0m         copy_btn [38;5;241m=[39m gr[38;5;241m.[39mButton([38;5;124m"[39m[38;5;124mCopy to Clipboard[39m[38;5;124m"[39m)
    [1;32m     64[0m         download_btn [38;5;241m=[39m gr[38;5;241m.[39mButton(
    [1;32m     65[0m             [38;5;124m"[39m[38;5;124mDownload as Markdown[39m[38;5;124m"[39m,
    [1;32m     66[0m             value[38;5;241m=[39m[38;5;124m"[39m[38;5;124mconversation.md[39m[38;5;124m"[39m,
    [0;32m---> 67[0m             variant[38;5;241m=[39m[43msecondary[49m)
    [1;32m     69[0m     file_output [38;5;241m=[39m gr[38;5;241m.[39mFile(label[38;5;241m=[39m[38;5;124m"[39m[38;5;124mDownload[39m[38;5;124m"[39m, visible[38;5;241m=[39m[38;5;28;01mFalse[39;00m)
    [1;32m     71[0m [38;5;66;03m# System prompt and context viewer (collapsible)[39;00m

    [0;31mNameError[0m: name 'secondary' is not defined

Close all Gradio clients and ports

``` python
#gr.close_all()
```
